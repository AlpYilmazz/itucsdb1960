{% extends "layout.html" %}

{% block title %} ITU Student Store {% endblock %}

{% block stylesheet %} "/static/style_store.css" {% endblock %}

{% block body_content %}
	<div class="container">
		<h1> ITU Store </h1>

		<form class="sell_form" action="/store" method="post">
			<input type="hidden" name="form_key" value="sell">

			<input class="sell" type="text" name="item_name" placeholder="Enter the name of the item" required>
			<br>
			<input class="sell" type="text" name="price" placeholder="Enter the price" required>
			<br>
			<input class="sell" type="text" name="shortD" placeholder="(Optional) Enter a short description">
			<br>
			<input class="sell" type="text" name="image" placeholder="(Optional) Upload an image">
			<br>

			<input class="sell" type="submit" name="send" value="Sell Item">
		</form>

		{% if filter_items %}
		{% for item_name, seller_name, price_lw, price_hi in filter_items %}
		<form class="filter_form" action="/store" method="post">
			<input type="hidden" name="form_key" value="filter">

			<input class="filter" type="text" name="item_name" placeholder="Item Name" value="{{ item_name }}">
			<br>
			<input class="filter" type="text" name="seller_name" placeholder="Seller Name" value="{{ seller_name }}">
			<br>
			<input class="filter" type="text" name="price_lw" placeholder="min price" value="{{ price_lw }}">
			<input class="filter" type="text" name="price_hi" placeholder="max price" value="{{ price_hi }}">
			<br>

			<input class="filter" type="submit" name="filter" value="Filter">
			<input class="filter" type="submit" name="drop_filter" value="Drop All Filter">
		</form>
		{% endfor %}
		{% endif %}

		{% if selling_items %}
		<table class="store_posts">
			<tr>
				<th> Image </th>
				<th> Item Name </th>
				<th> Price </th>
				<th> Short Description </th>
				<th> Seller </th>
				<th> Total # of Questions </th>
				<th> Total # of Answers </th>
			</tr>

			{% for sellid, sellItem in selling_items %}
			<tr class="items" onclick="location.href='/store/{{sellid}}'">
        		<td> {{ sellItem.image }} </td>
        		<td> {{ sellItem.item_name }} </td>
        		<td> {{ sellItem.price }} </td>
        		<td> {{ sellItem.shortD }} </td>
        		<td> {{ sellItem.seller }} </td>
        		<td> {{ sellItem.n_questions }} </td>
        		<td> {{ sellItem.n_answers }} </td>
			</tr>
			{% endfor %}
    	</table>
		{% else %}
		<h2> No Item Found in Store </h2>
		{% endif %}

	</div>
{% endblock %}
